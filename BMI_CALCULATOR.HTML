<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BMI Calculator</title>

<style>
*{
    box-sizing:border-box;
    transition: all 0.3s ease;   /* GLOBAL SMOOTHNESS */
}

body{
    font-family:"Segoe UI",Arial,sans-serif;
    min-height:100vh;
    padding:30px;
    background:linear-gradient(120deg,#e3f2fd,#f3e5f5,#ffffff);
}

/* Card */
.container{
    max-width:460px;
    margin:auto;
    background:linear-gradient(180deg,#eef3ff,#ffffff);
    padding:28px;
    border-radius:22px;
    box-shadow:0 18px 40px rgba(0,0,0,0.12);
    animation:fadeIn 0.8s ease;
}

/* Fade animation */
@keyframes fadeIn{
    from{opacity:0;transform:translateY(20px)}
    to{opacity:1;transform:translateY(0)}
}

h1{
    text-align:center;
    margin-bottom:20px;
    color:#2c3e50;
}

label{
    font-weight:600;
    display:block;
    margin-top:14px;
    color:#34495e;
}

/* Inputs */
input{
    width:100%;
    padding:14px;
    margin-top:6px;
    border-radius:14px;
    border:1px solid #ccd6e4;
    font-size:14px;
    background:#f9fbff;
}

input:hover{
    background:#ffffff;
}

input:focus{
    outline:none;
    border-color:#1976d2;
    box-shadow:0 0 0 4px rgba(25,118,210,0.15);
    transform:scale(1.01);
}

/* Buttons */
button{
    width:100%;
    padding:14px;
    margin-top:18px;
    border:none;
    border-radius:16px;
    background:#1976d2;
    color:#fff;
    font-size:15px;
    cursor:pointer;
}

button:hover{
    background:#1565c0;
    transform:translateY(-2px);
    box-shadow:0 6px 15px rgba(0,0,0,0.15);
}

button:active{
    transform:scale(0.98);
}

.reset{background:#9e9e9e}
.reset:hover{background:#757575}

/* Result */
.result{
    margin-top:20px;
    padding:16px;
    border-radius:18px;
    font-weight:600;
    text-align:center;
    display:none;
    animation:pop 0.4s ease;
}

@keyframes pop{
    from{opacity:0;transform:scale(0.9)}
    to{opacity:1;transform:scale(1)}
}

.under{background:#fff3e0;color:#ef6c00}
.normal{background:#e8f5e9;color:#2e7d32}
.over{background:#fff8e1;color:#f9a825}
.obese{background:#ffebee;color:#c62828}

/* BMI Meter */
.meter-box{
    margin-top:18px;
    padding:14px;
    border-radius:16px;
    background:#f4f7ff;
    display:none;
    animation:fadeIn 0.5s ease;
}

.meter-label{
    text-align:center;
    font-weight:600;
    margin-bottom:8px;
    color:#34495e;
}

.meter{
    height:14px;
    background:#dde3f0;
    border-radius:10px;
    overflow:hidden;
}

.meter-fill{
    height:100%;
    width:0%;
    background:#1976d2;
    transition:width 0.8s ease; /* Smooth meter */
}

/* Extra weight */
.extra-weight{
    margin-top:12px;
    padding:12px;
    border-radius:14px;
    background:#fff0f0;
    text-align:center;
    font-weight:600;
    color:#c62828;
    animation:pop 0.4s ease;
}

/* Table */
table{
    width:100%;
    margin-top:24px;
    border-collapse:collapse;
    font-size:13px;
    background:#ffffff;
    border-radius:14px;
    overflow:hidden;
}

th,td{
    padding:10px;
    text-align:center;
    border-bottom:1px solid #eee;
}

tr:hover{
    background:#f4f6fb;
}

th{
    background:#f4f6fb;
}

.clear-history{
    background:#f44336;
    margin-top:14px;
}
.clear-history:hover{background:#d32f2f}
</style>
</head>

<body>

<div class="container">
<h1>BMI Calculator</h1>

<label>Height</label>
<input type="number" id="height" min="50" max="250" placeholder="Enter your height in cm">

<label>Weight</label>
<input type="number" id="weight" min="10" max="300" placeholder="Enter your weight in kg">

<button onclick="calculateBMI()">Calculate BMI</button>
<button class="reset" onclick="resetInputs()">Reset</button>

<div id="result" class="result"></div>

<div class="meter-box" id="meterBox">
    <div class="meter-label" id="meterLabel"></div>
    <div class="meter">
        <div class="meter-fill" id="meterFill"></div>
    </div>
</div>

<div class="extra-weight" id="extraWeight"></div>

<table id="historyTable" style="display:none">
<thead>
<tr>
<th>Date & Time</th>
<th>Height</th>
<th>Weight</th>
<th>BMI</th>
<th>Category</th>
</tr>
</thead>
<tbody></tbody>
</table>

<button class="clear-history" onclick="clearHistory()" style="display:none">
Clear History
</button>
</div>

<script>
let history = JSON.parse(localStorage.getItem("bmiHistory")) || [];

function calculateBMI(){
    let h = height.value;
    let w = weight.value;

    let result = document.getElementById("result");
    let meterBox = document.getElementById("meterBox");
    let meterFill = document.getElementById("meterFill");
    let meterLabel = document.getElementById("meterLabel");
    let extraWeightDiv = document.getElementById("extraWeight");

    if(h<=0 || w<=0){
        result.style.display="block";
        result.className="result obese";
        result.innerText="Please enter valid height and weight!";
        return;
    }

    let heightM = h / 100;
    let bmi = (w / (heightM * heightM)).toFixed(2);

    let category="", cls="", percent=0;

    if(bmi < 18.5){category="Underweight";cls="under";percent=25}
    else if(bmi < 24.9){category="Normal";cls="normal";percent=50}
    else if(bmi < 29.9){category="Overweight";cls="over";percent=75}
    else{category="Obese";cls="obese";percent=100}

    result.style.display="block";
    result.className="result "+cls;
    result.innerText=`BMI: ${bmi} (${category})`;

    meterBox.style.display="block";
    meterFill.style.width = percent + "%";
    meterLabel.innerText = `BMI Meter : ${bmi}`;

    extraWeightDiv.innerText="";
    if(bmi >= 25){
        let idealWeight = 24.9 * (heightM * heightM);
        let extra = (w - idealWeight).toFixed(1);
        if(extra > 0){
            extraWeightDiv.innerText = `Extra Weight: ${extra} kg`;
        }
    }

    let record={
        date:new Date().toLocaleString(),
        height:h,
        weight:w,
        bmi,
        category
    };

    history.push(record);
    localStorage.setItem("bmiHistory",JSON.stringify(history));
    renderHistory();
}

function renderHistory(){
    let tbody=document.querySelector("#historyTable tbody");
    tbody.innerHTML="";
    history.forEach(r=>{
        tbody.innerHTML+=`
        <tr>
            <td>${r.date}</td>
            <td>${r.height}</td>
            <td>${r.weight}</td>
            <td>${r.bmi}</td>
            <td>${r.category}</td>
        </tr>`;
    });
    historyTable.style.display="table";
    document.querySelector(".clear-history").style.display="block";
}

function resetInputs(){
    height.value="";
    weight.value="";
    result.style.display="none";
    meterBox.style.display="none";
    extraWeight.innerText="";
}

function clearHistory(){
    localStorage.removeItem("bmiHistory");
    history=[];
    historyTable.style.display="none";
    document.querySelector(".clear-history").style.display="none";
}
</script>

</body>
</html>
